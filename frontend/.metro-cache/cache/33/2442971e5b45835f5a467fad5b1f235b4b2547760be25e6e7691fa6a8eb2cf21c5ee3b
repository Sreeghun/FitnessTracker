{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        if (storedToken) {\n          setToken(storedToken);\n          await fetchUserProfile(storedToken);\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const fetchUserProfile = async authToken => {\n      try {\n        const response = await axios.default.get(`${BACKEND_URL}/api/profile`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n        await logout();\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        setToken(access_token);\n        await fetchUserProfile(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async userData => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/register`, userData);\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        setToken(access_token);\n        await fetchUserProfile(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        await fetchUserProfile(token);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":131,"map":[[13,2,32,0,"Object"],[13,8,32,0],[13,9,32,0,"defineProperty"],[13,23,32,0],[13,24,32,0,"exports"],[13,31,32,0],[14,4,32,0,"enumerable"],[14,14,32,0],[15,4,32,0,"get"],[15,7,32,0],[15,18,32,0,"get"],[15,19,32,0],[16,6,32,0],[16,13,32,0,"AuthProvider"],[16,25,32,0],[17,4,32,0],[18,2,32,0],[19,2,113,0,"Object"],[19,8,113,0],[19,9,113,0,"defineProperty"],[19,23,113,0],[19,24,113,0,"exports"],[19,31,113,0],[20,4,113,0,"enumerable"],[20,14,113,0],[21,4,113,0,"get"],[21,7,113,0],[21,18,113,0,"get"],[21,19,113,0],[22,6,113,0],[22,13,113,0,"useAuth"],[22,20,113,0],[23,4,113,0],[24,2,113,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_axios"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"axios"],[29,11,3,0],[29,14,3,0,"_interopDefault"],[29,29,3,0],[29,30,3,0,"_axios"],[29,36,3,0],[30,2,3,26],[30,6,3,26,"_reactJsxDevRuntime"],[30,25,3,26],[30,28,3,26,"require"],[30,35,3,26],[30,36,3,26,"_dependencyMap"],[30,50,3,26],[31,2,5,0],[31,8,5,6,"BACKEND_URL"],[31,19,5,17],[31,22,5,20,"process"],[31,29,5,27],[31,30,5,28,"env"],[31,33,5,31],[31,34,5,32,"EXPO_PUBLIC_BACKEND_URL"],[31,57,5,55],[32,2,30,0],[32,8,30,6,"AuthContext"],[32,19,30,17],[32,35,30,20],[32,39,30,20,"createContext"],[32,45,30,33],[32,46,30,33,"createContext"],[32,59,30,33],[32,61,30,63,"undefined"],[32,70,30,72],[32,71,30,73],[33,2,32,7],[33,8,32,13,"AuthProvider"],[33,20,32,66],[33,23,32,69,"AuthProvider"],[33,24,32,70],[34,4,32,72,"children"],[35,2,32,81],[35,3,32,82],[35,8,32,87],[36,4,33,2],[36,10,33,8],[36,11,33,9,"user"],[36,15,33,13],[36,17,33,15,"setUser"],[36,24,33,22],[36,25,33,23],[36,28,33,26],[36,32,33,26,"useState"],[36,38,33,34],[36,39,33,34,"useState"],[36,47,33,34],[36,49,33,48],[36,53,33,52],[36,54,33,53],[37,4,34,2],[37,10,34,8],[37,11,34,9,"token"],[37,16,34,14],[37,18,34,16,"setToken"],[37,26,34,24],[37,27,34,25],[37,30,34,28],[37,34,34,28,"useState"],[37,40,34,36],[37,41,34,36,"useState"],[37,49,34,36],[37,51,34,52],[37,55,34,56],[37,56,34,57],[38,4,35,2],[38,10,35,8],[38,11,35,9,"loading"],[38,18,35,16],[38,20,35,18,"setLoading"],[38,30,35,28],[38,31,35,29],[38,34,35,32],[38,38,35,32,"useState"],[38,44,35,40],[38,45,35,40,"useState"],[38,53,35,40],[38,55,35,41],[38,59,35,45],[38,60,35,46],[39,4,37,2],[39,8,37,2,"useEffect"],[39,14,37,11],[39,15,37,11,"useEffect"],[39,24,37,11],[39,26,37,12],[39,32,37,18],[40,6,38,4,"loadStoredAuth"],[40,20,38,18],[40,21,38,19],[40,22,38,20],[41,4,39,2],[41,5,39,3],[41,7,39,5],[41,9,39,7],[41,10,39,8],[42,4,41,2],[42,10,41,8,"loadStoredAuth"],[42,24,41,22],[42,27,41,25],[42,33,41,25,"loadStoredAuth"],[42,34,41,25],[42,39,41,37],[43,6,42,4],[43,10,42,8],[44,8,43,6],[44,14,43,12,"storedToken"],[44,25,43,23],[44,28,43,26],[44,34,43,32,"AsyncStorage"],[44,46,43,44],[44,47,43,44,"default"],[44,54,43,44],[44,55,43,45,"getItem"],[44,62,43,52],[44,63,43,53],[44,75,43,65],[44,76,43,66],[45,8,44,6],[45,12,44,10,"storedToken"],[45,23,44,21],[45,25,44,23],[46,10,45,8,"setToken"],[46,18,45,16],[46,19,45,17,"storedToken"],[46,30,45,28],[46,31,45,29],[47,10,46,8],[47,16,46,14,"fetchUserProfile"],[47,32,46,30],[47,33,46,31,"storedToken"],[47,44,46,42],[47,45,46,43],[48,8,47,6],[49,6,48,4],[49,7,48,5],[49,8,48,6],[49,15,48,13,"error"],[49,20,48,18],[49,22,48,20],[50,8,49,6,"console"],[50,15,49,13],[50,16,49,14,"error"],[50,21,49,19],[50,22,49,20],[50,43,49,41],[50,45,49,43,"error"],[50,50,49,48],[50,51,49,49],[51,6,50,4],[51,7,50,5],[51,16,50,14],[52,8,51,6,"setLoading"],[52,18,51,16],[52,19,51,17],[52,24,51,22],[52,25,51,23],[53,6,52,4],[54,4,53,2],[54,5,53,3],[55,4,55,2],[55,10,55,8,"fetchUserProfile"],[55,26,55,24],[55,29,55,27],[55,35,55,34,"authToken"],[55,44,55,51],[55,48,55,56],[56,6,56,4],[56,10,56,8],[57,8,57,6],[57,14,57,12,"response"],[57,22,57,20],[57,25,57,23],[57,31,57,29,"axios"],[57,36,57,34],[57,37,57,34,"default"],[57,44,57,34],[57,45,57,35,"get"],[57,48,57,38],[57,49,57,39],[57,52,57,42,"BACKEND_URL"],[57,63,57,53],[57,77,57,67],[57,79,57,69],[58,10,58,8,"headers"],[58,17,58,15],[58,19,58,17],[59,12,58,19,"Authorization"],[59,25,58,32],[59,27,58,34],[59,37,58,44,"authToken"],[59,46,58,53],[60,10,58,56],[61,8,59,6],[61,9,59,7],[61,10,59,8],[62,8,60,6,"setUser"],[62,15,60,13],[62,16,60,14,"response"],[62,24,60,22],[62,25,60,23,"data"],[62,29,60,27],[62,30,60,28],[63,6,61,4],[63,7,61,5],[63,8,61,6],[63,15,61,13,"error"],[63,20,61,18],[63,22,61,20],[64,8,62,6,"console"],[64,15,62,13],[64,16,62,14,"error"],[64,21,62,19],[64,22,62,20],[64,47,62,45],[64,49,62,47,"error"],[64,54,62,52],[64,55,62,53],[65,8,63,6],[65,14,63,12,"logout"],[65,20,63,18],[65,21,63,19],[65,22,63,20],[66,6,64,4],[67,4,65,2],[67,5,65,3],[68,4,67,2],[68,10,67,8,"login"],[68,15,67,13],[68,18,67,16],[68,24,67,16,"login"],[68,25,67,23,"email"],[68,30,67,36],[68,32,67,38,"password"],[68,40,67,54],[68,45,67,59],[69,6,68,4],[69,10,68,8],[70,8,69,6],[70,14,69,12,"response"],[70,22,69,20],[70,25,69,23],[70,31,69,29,"axios"],[70,36,69,34],[70,37,69,34,"default"],[70,44,69,34],[70,45,69,35,"post"],[70,49,69,39],[70,50,69,40],[70,53,69,43,"BACKEND_URL"],[70,64,69,54],[70,81,69,71],[70,83,69,73],[71,10,70,8,"email"],[71,15,70,13],[72,10,71,8,"password"],[73,8,72,6],[73,9,72,7],[73,10,72,8],[74,8,73,6],[74,14,73,12],[75,10,73,14,"access_token"],[76,8,73,27],[76,9,73,28],[76,12,73,31,"response"],[76,20,73,39],[76,21,73,40,"data"],[76,25,73,44],[77,8,74,6],[77,14,74,12,"AsyncStorage"],[77,26,74,24],[77,27,74,24,"default"],[77,34,74,24],[77,35,74,25,"setItem"],[77,42,74,32],[77,43,74,33],[77,55,74,45],[77,57,74,47,"access_token"],[77,69,74,59],[77,70,74,60],[78,8,75,6,"setToken"],[78,16,75,14],[78,17,75,15,"access_token"],[78,29,75,27],[78,30,75,28],[79,8,76,6],[79,14,76,12,"fetchUserProfile"],[79,30,76,28],[79,31,76,29,"access_token"],[79,43,76,41],[79,44,76,42],[80,6,77,4],[80,7,77,5],[80,8,77,6],[80,15,77,13,"error"],[80,20,77,23],[80,22,77,25],[81,8,78,6],[81,14,78,12],[81,18,78,16,"Error"],[81,23,78,21],[81,24,78,22,"error"],[81,29,78,27],[81,30,78,28,"response"],[81,38,78,36],[81,40,78,38,"data"],[81,44,78,42],[81,46,78,44,"detail"],[81,52,78,50],[81,56,78,54],[81,70,78,68],[81,71,78,69],[82,6,79,4],[83,4,80,2],[83,5,80,3],[84,4,82,2],[84,10,82,8,"register"],[84,18,82,16],[84,21,82,19],[84,27,82,26,"userData"],[84,35,82,39],[84,39,82,44],[85,6,83,4],[85,10,83,8],[86,8,84,6],[86,14,84,12,"response"],[86,22,84,20],[86,25,84,23],[86,31,84,29,"axios"],[86,36,84,34],[86,37,84,34,"default"],[86,44,84,34],[86,45,84,35,"post"],[86,49,84,39],[86,50,84,40],[86,53,84,43,"BACKEND_URL"],[86,64,84,54],[86,84,84,74],[86,86,84,76,"userData"],[86,94,84,84],[86,95,84,85],[87,8,85,6],[87,14,85,12],[88,10,85,14,"access_token"],[89,8,85,27],[89,9,85,28],[89,12,85,31,"response"],[89,20,85,39],[89,21,85,40,"data"],[89,25,85,44],[90,8,86,6],[90,14,86,12,"AsyncStorage"],[90,26,86,24],[90,27,86,24,"default"],[90,34,86,24],[90,35,86,25,"setItem"],[90,42,86,32],[90,43,86,33],[90,55,86,45],[90,57,86,47,"access_token"],[90,69,86,59],[90,70,86,60],[91,8,87,6,"setToken"],[91,16,87,14],[91,17,87,15,"access_token"],[91,29,87,27],[91,30,87,28],[92,8,88,6],[92,14,88,12,"fetchUserProfile"],[92,30,88,28],[92,31,88,29,"access_token"],[92,43,88,41],[92,44,88,42],[93,6,89,4],[93,7,89,5],[93,8,89,6],[93,15,89,13,"error"],[93,20,89,23],[93,22,89,25],[94,8,90,6],[94,14,90,12],[94,18,90,16,"Error"],[94,23,90,21],[94,24,90,22,"error"],[94,29,90,27],[94,30,90,28,"response"],[94,38,90,36],[94,40,90,38,"data"],[94,44,90,42],[94,46,90,44,"detail"],[94,52,90,50],[94,56,90,54],[94,77,90,75],[94,78,90,76],[95,6,91,4],[96,4,92,2],[96,5,92,3],[97,4,94,2],[97,10,94,8,"logout"],[97,16,94,14],[97,19,94,17],[97,25,94,17,"logout"],[97,26,94,17],[97,31,94,29],[98,6,95,4],[98,12,95,10,"AsyncStorage"],[98,24,95,22],[98,25,95,22,"default"],[98,32,95,22],[98,33,95,23,"removeItem"],[98,43,95,33],[98,44,95,34],[98,56,95,46],[98,57,95,47],[99,6,96,4,"setToken"],[99,14,96,12],[99,15,96,13],[99,19,96,17],[99,20,96,18],[100,6,97,4,"setUser"],[100,13,97,11],[100,14,97,12],[100,18,97,16],[100,19,97,17],[101,4,98,2],[101,5,98,3],[102,4,100,2],[102,10,100,8,"refreshUser"],[102,21,100,19],[102,24,100,22],[102,30,100,22,"refreshUser"],[102,31,100,22],[102,36,100,34],[103,6,101,4],[103,10,101,8,"token"],[103,15,101,13],[103,17,101,15],[104,8,102,6],[104,14,102,12,"fetchUserProfile"],[104,30,102,28],[104,31,102,29,"token"],[104,36,102,34],[104,37,102,35],[105,6,103,4],[106,4,104,2],[106,5,104,3],[107,4,106,2],[107,24,107,4],[107,28,107,4,"_reactJsxDevRuntime"],[107,47,107,4],[107,48,107,4,"jsxDEV"],[107,54,107,4],[107,56,107,5,"AuthContext"],[107,67,107,16],[107,68,107,17,"Provider"],[107,76,107,25],[108,6,107,26,"value"],[108,11,107,31],[108,13,107,33],[109,8,107,35,"user"],[109,12,107,39],[110,8,107,41,"token"],[110,13,107,46],[111,8,107,48,"loading"],[111,15,107,55],[112,8,107,57,"login"],[112,13,107,62],[113,8,107,64,"register"],[113,16,107,72],[114,8,107,74,"logout"],[114,14,107,80],[115,8,107,82,"refreshUser"],[116,6,107,94],[116,7,107,96],[117,6,107,96,"children"],[117,14,107,96],[117,16,108,7,"children"],[118,4,108,15],[119,6,108,15,"fileName"],[119,14,108,15],[119,16,108,15,"_jsxFileName"],[119,28,108,15],[120,6,108,15,"lineNumber"],[120,16,108,15],[121,6,108,15,"columnNumber"],[121,18,108,15],[122,4,108,15],[122,11,109,26],[122,12,109,27],[123,2,111,0],[123,3,111,1],[124,2,113,7],[124,8,113,13,"useAuth"],[124,15,113,20],[124,18,113,23,"useAuth"],[124,19,113,23],[124,24,113,29],[125,4,114,2],[125,10,114,8,"context"],[125,17,114,15],[125,20,114,18],[125,24,114,18,"useContext"],[125,30,114,28],[125,31,114,28,"useContext"],[125,41,114,28],[125,43,114,29,"AuthContext"],[125,54,114,40],[125,55,114,41],[126,4,115,2],[126,8,115,6],[126,9,115,7,"context"],[126,16,115,14],[126,18,115,16],[127,6,116,4],[127,12,116,10],[127,16,116,14,"Error"],[127,21,116,19],[127,22,116,20],[127,64,116,62],[127,65,116,63],[128,4,117,2],[129,4,118,2],[129,11,118,9,"context"],[129,18,118,16],[130,2,119,0],[130,3,119,1],[131,0,119,2],[131,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUserProfile","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;qEC+B;YCK;GDE;yBEE;GFY;2BGE;GHU;gBIE;GJa;mBKE;GLU;iBME;GNI;sBOE;GPI;CDO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}