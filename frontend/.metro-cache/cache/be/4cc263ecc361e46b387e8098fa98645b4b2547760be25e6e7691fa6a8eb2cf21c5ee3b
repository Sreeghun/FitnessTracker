{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        if (storedToken) {\n          setToken(storedToken);\n          await fetchUserProfile(storedToken);\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const fetchUserProfile = async authToken => {\n      try {\n        const response = await axios.default.get(`${BACKEND_URL}/api/profile`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n        await logout();\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        setToken(access_token);\n        await fetchUserProfile(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async userData => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/register`, userData);\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        setToken(access_token);\n        await fetchUserProfile(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        await fetchUserProfile(token);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":141,"map":[[15,2,32,0,"Object"],[15,8,32,0],[15,9,32,0,"defineProperty"],[15,23,32,0],[15,24,32,0,"exports"],[15,31,32,0],[16,4,32,0,"enumerable"],[16,14,32,0],[17,4,32,0,"get"],[17,7,32,0],[17,18,32,0,"get"],[17,19,32,0],[18,6,32,0],[18,13,32,0,"AuthProvider"],[18,25,32,0],[19,4,32,0],[20,2,32,0],[21,2,113,0,"Object"],[21,8,113,0],[21,9,113,0,"defineProperty"],[21,23,113,0],[21,24,113,0,"exports"],[21,31,113,0],[22,4,113,0,"enumerable"],[22,14,113,0],[23,4,113,0,"get"],[23,7,113,0],[23,18,113,0,"get"],[23,19,113,0],[24,6,113,0],[24,13,113,0,"useAuth"],[24,20,113,0],[25,4,113,0],[26,2,113,0],[27,2,119,2],[27,6,119,2,"_expoVirtualEnv"],[27,21,119,2],[27,24,119,2,"require"],[27,31,119,2],[27,32,119,2,"_dependencyMap"],[27,46,119,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,5,0],[34,8,5,6,"BACKEND_URL"],[34,19,5,17],[34,22,5,17,"_expoVirtualEnv"],[34,37,5,17],[34,38,5,17,"env"],[34,41,5,17],[34,42,5,17,"EXPO_PUBLIC_BACKEND_URL"],[34,65,5,55],[35,2,30,0],[35,8,30,6,"AuthContext"],[35,19,30,17],[35,35,30,20],[35,39,30,20,"createContext"],[35,45,30,33],[35,46,30,33,"createContext"],[35,59,30,33],[35,61,30,63,"undefined"],[35,70,30,72],[35,71,30,73],[36,2,32,7],[36,8,32,13,"AuthProvider"],[36,20,32,66],[36,23,32,69,"AuthProvider"],[36,24,32,70],[37,4,32,72,"children"],[38,2,32,81],[38,3,32,82],[38,8,32,87],[39,4,32,87,"_s"],[39,6,32,87],[40,4,33,2],[40,10,33,8],[40,11,33,9,"user"],[40,15,33,13],[40,17,33,15,"setUser"],[40,24,33,22],[40,25,33,23],[40,28,33,26],[40,32,33,26,"useState"],[40,38,33,34],[40,39,33,34,"useState"],[40,47,33,34],[40,49,33,48],[40,53,33,52],[40,54,33,53],[41,4,34,2],[41,10,34,8],[41,11,34,9,"token"],[41,16,34,14],[41,18,34,16,"setToken"],[41,26,34,24],[41,27,34,25],[41,30,34,28],[41,34,34,28,"useState"],[41,40,34,36],[41,41,34,36,"useState"],[41,49,34,36],[41,51,34,52],[41,55,34,56],[41,56,34,57],[42,4,35,2],[42,10,35,8],[42,11,35,9,"loading"],[42,18,35,16],[42,20,35,18,"setLoading"],[42,30,35,28],[42,31,35,29],[42,34,35,32],[42,38,35,32,"useState"],[42,44,35,40],[42,45,35,40,"useState"],[42,53,35,40],[42,55,35,41],[42,59,35,45],[42,60,35,46],[43,4,37,2],[43,8,37,2,"useEffect"],[43,14,37,11],[43,15,37,11,"useEffect"],[43,24,37,11],[43,26,37,12],[43,32,37,18],[44,6,38,4,"loadStoredAuth"],[44,20,38,18],[44,21,38,19],[44,22,38,20],[45,4,39,2],[45,5,39,3],[45,7,39,5],[45,9,39,7],[45,10,39,8],[46,4,41,2],[46,10,41,8,"loadStoredAuth"],[46,24,41,22],[46,27,41,25],[46,33,41,25,"loadStoredAuth"],[46,34,41,25],[46,39,41,37],[47,6,42,4],[47,10,42,8],[48,8,43,6],[48,14,43,12,"storedToken"],[48,25,43,23],[48,28,43,26],[48,34,43,32,"AsyncStorage"],[48,46,43,44],[48,47,43,44,"default"],[48,54,43,44],[48,55,43,45,"getItem"],[48,62,43,52],[48,63,43,53],[48,75,43,65],[48,76,43,66],[49,8,44,6],[49,12,44,10,"storedToken"],[49,23,44,21],[49,25,44,23],[50,10,45,8,"setToken"],[50,18,45,16],[50,19,45,17,"storedToken"],[50,30,45,28],[50,31,45,29],[51,10,46,8],[51,16,46,14,"fetchUserProfile"],[51,32,46,30],[51,33,46,31,"storedToken"],[51,44,46,42],[51,45,46,43],[52,8,47,6],[53,6,48,4],[53,7,48,5],[53,8,48,6],[53,15,48,13,"error"],[53,20,48,18],[53,22,48,20],[54,8,49,6,"console"],[54,15,49,13],[54,16,49,14,"error"],[54,21,49,19],[54,22,49,20],[54,43,49,41],[54,45,49,43,"error"],[54,50,49,48],[54,51,49,49],[55,6,50,4],[55,7,50,5],[55,16,50,14],[56,8,51,6,"setLoading"],[56,18,51,16],[56,19,51,17],[56,24,51,22],[56,25,51,23],[57,6,52,4],[58,4,53,2],[58,5,53,3],[59,4,55,2],[59,10,55,8,"fetchUserProfile"],[59,26,55,24],[59,29,55,27],[59,35,55,34,"authToken"],[59,44,55,51],[59,48,55,56],[60,6,56,4],[60,10,56,8],[61,8,57,6],[61,14,57,12,"response"],[61,22,57,20],[61,25,57,23],[61,31,57,29,"axios"],[61,36,57,34],[61,37,57,34,"default"],[61,44,57,34],[61,45,57,35,"get"],[61,48,57,38],[61,49,57,39],[61,52,57,42,"BACKEND_URL"],[61,63,57,53],[61,77,57,67],[61,79,57,69],[62,10,58,8,"headers"],[62,17,58,15],[62,19,58,17],[63,12,58,19,"Authorization"],[63,25,58,32],[63,27,58,34],[63,37,58,44,"authToken"],[63,46,58,53],[64,10,58,56],[65,8,59,6],[65,9,59,7],[65,10,59,8],[66,8,60,6,"setUser"],[66,15,60,13],[66,16,60,14,"response"],[66,24,60,22],[66,25,60,23,"data"],[66,29,60,27],[66,30,60,28],[67,6,61,4],[67,7,61,5],[67,8,61,6],[67,15,61,13,"error"],[67,20,61,18],[67,22,61,20],[68,8,62,6,"console"],[68,15,62,13],[68,16,62,14,"error"],[68,21,62,19],[68,22,62,20],[68,47,62,45],[68,49,62,47,"error"],[68,54,62,52],[68,55,62,53],[69,8,63,6],[69,14,63,12,"logout"],[69,20,63,18],[69,21,63,19],[69,22,63,20],[70,6,64,4],[71,4,65,2],[71,5,65,3],[72,4,67,2],[72,10,67,8,"login"],[72,15,67,13],[72,18,67,16],[72,24,67,16,"login"],[72,25,67,23,"email"],[72,30,67,36],[72,32,67,38,"password"],[72,40,67,54],[72,45,67,59],[73,6,68,4],[73,10,68,8],[74,8,69,6],[74,14,69,12,"response"],[74,22,69,20],[74,25,69,23],[74,31,69,29,"axios"],[74,36,69,34],[74,37,69,34,"default"],[74,44,69,34],[74,45,69,35,"post"],[74,49,69,39],[74,50,69,40],[74,53,69,43,"BACKEND_URL"],[74,64,69,54],[74,81,69,71],[74,83,69,73],[75,10,70,8,"email"],[75,15,70,13],[76,10,71,8,"password"],[77,8,72,6],[77,9,72,7],[77,10,72,8],[78,8,73,6],[78,14,73,12],[79,10,73,14,"access_token"],[80,8,73,27],[80,9,73,28],[80,12,73,31,"response"],[80,20,73,39],[80,21,73,40,"data"],[80,25,73,44],[81,8,74,6],[81,14,74,12,"AsyncStorage"],[81,26,74,24],[81,27,74,24,"default"],[81,34,74,24],[81,35,74,25,"setItem"],[81,42,74,32],[81,43,74,33],[81,55,74,45],[81,57,74,47,"access_token"],[81,69,74,59],[81,70,74,60],[82,8,75,6,"setToken"],[82,16,75,14],[82,17,75,15,"access_token"],[82,29,75,27],[82,30,75,28],[83,8,76,6],[83,14,76,12,"fetchUserProfile"],[83,30,76,28],[83,31,76,29,"access_token"],[83,43,76,41],[83,44,76,42],[84,6,77,4],[84,7,77,5],[84,8,77,6],[84,15,77,13,"error"],[84,20,77,23],[84,22,77,25],[85,8,78,6],[85,14,78,12],[85,18,78,16,"Error"],[85,23,78,21],[85,24,78,22,"error"],[85,29,78,27],[85,30,78,28,"response"],[85,38,78,36],[85,40,78,38,"data"],[85,44,78,42],[85,46,78,44,"detail"],[85,52,78,50],[85,56,78,54],[85,70,78,68],[85,71,78,69],[86,6,79,4],[87,4,80,2],[87,5,80,3],[88,4,82,2],[88,10,82,8,"register"],[88,18,82,16],[88,21,82,19],[88,27,82,26,"userData"],[88,35,82,39],[88,39,82,44],[89,6,83,4],[89,10,83,8],[90,8,84,6],[90,14,84,12,"response"],[90,22,84,20],[90,25,84,23],[90,31,84,29,"axios"],[90,36,84,34],[90,37,84,34,"default"],[90,44,84,34],[90,45,84,35,"post"],[90,49,84,39],[90,50,84,40],[90,53,84,43,"BACKEND_URL"],[90,64,84,54],[90,84,84,74],[90,86,84,76,"userData"],[90,94,84,84],[90,95,84,85],[91,8,85,6],[91,14,85,12],[92,10,85,14,"access_token"],[93,8,85,27],[93,9,85,28],[93,12,85,31,"response"],[93,20,85,39],[93,21,85,40,"data"],[93,25,85,44],[94,8,86,6],[94,14,86,12,"AsyncStorage"],[94,26,86,24],[94,27,86,24,"default"],[94,34,86,24],[94,35,86,25,"setItem"],[94,42,86,32],[94,43,86,33],[94,55,86,45],[94,57,86,47,"access_token"],[94,69,86,59],[94,70,86,60],[95,8,87,6,"setToken"],[95,16,87,14],[95,17,87,15,"access_token"],[95,29,87,27],[95,30,87,28],[96,8,88,6],[96,14,88,12,"fetchUserProfile"],[96,30,88,28],[96,31,88,29,"access_token"],[96,43,88,41],[96,44,88,42],[97,6,89,4],[97,7,89,5],[97,8,89,6],[97,15,89,13,"error"],[97,20,89,23],[97,22,89,25],[98,8,90,6],[98,14,90,12],[98,18,90,16,"Error"],[98,23,90,21],[98,24,90,22,"error"],[98,29,90,27],[98,30,90,28,"response"],[98,38,90,36],[98,40,90,38,"data"],[98,44,90,42],[98,46,90,44,"detail"],[98,52,90,50],[98,56,90,54],[98,77,90,75],[98,78,90,76],[99,6,91,4],[100,4,92,2],[100,5,92,3],[101,4,94,2],[101,10,94,8,"logout"],[101,16,94,14],[101,19,94,17],[101,25,94,17,"logout"],[101,26,94,17],[101,31,94,29],[102,6,95,4],[102,12,95,10,"AsyncStorage"],[102,24,95,22],[102,25,95,22,"default"],[102,32,95,22],[102,33,95,23,"removeItem"],[102,43,95,33],[102,44,95,34],[102,56,95,46],[102,57,95,47],[103,6,96,4,"setToken"],[103,14,96,12],[103,15,96,13],[103,19,96,17],[103,20,96,18],[104,6,97,4,"setUser"],[104,13,97,11],[104,14,97,12],[104,18,97,16],[104,19,97,17],[105,4,98,2],[105,5,98,3],[106,4,100,2],[106,10,100,8,"refreshUser"],[106,21,100,19],[106,24,100,22],[106,30,100,22,"refreshUser"],[106,31,100,22],[106,36,100,34],[107,6,101,4],[107,10,101,8,"token"],[107,15,101,13],[107,17,101,15],[108,8,102,6],[108,14,102,12,"fetchUserProfile"],[108,30,102,28],[108,31,102,29,"token"],[108,36,102,34],[108,37,102,35],[109,6,103,4],[110,4,104,2],[110,5,104,3],[111,4,106,2],[111,24,107,4],[111,28,107,4,"_reactJsxDevRuntime"],[111,47,107,4],[111,48,107,4,"jsxDEV"],[111,54,107,4],[111,56,107,5,"AuthContext"],[111,67,107,16],[111,68,107,17,"Provider"],[111,76,107,25],[112,6,107,26,"value"],[112,11,107,31],[112,13,107,33],[113,8,107,35,"user"],[113,12,107,39],[114,8,107,41,"token"],[114,13,107,46],[115,8,107,48,"loading"],[115,15,107,55],[116,8,107,57,"login"],[116,13,107,62],[117,8,107,64,"register"],[117,16,107,72],[118,8,107,74,"logout"],[118,14,107,80],[119,8,107,82,"refreshUser"],[120,6,107,94],[120,7,107,96],[121,6,107,96,"children"],[121,14,107,96],[121,16,108,7,"children"],[122,4,108,15],[123,6,108,15,"fileName"],[123,14,108,15],[123,16,108,15,"_jsxFileName"],[123,28,108,15],[124,6,108,15,"lineNumber"],[124,16,108,15],[125,6,108,15,"columnNumber"],[125,18,108,15],[126,4,108,15],[126,11,109,26],[126,12,109,27],[127,2,111,0],[127,3,111,1],[128,2,111,2,"_s"],[128,4,111,2],[128,5,32,13,"AuthProvider"],[128,17,32,66],[129,2,32,66,"_c"],[129,4,32,66],[129,7,32,13,"AuthProvider"],[129,19,32,66],[130,2,113,7],[130,8,113,13,"useAuth"],[130,15,113,20],[130,18,113,23,"useAuth"],[130,19,113,23],[130,24,113,29],[131,4,113,29,"_s2"],[131,7,113,29],[132,4,114,2],[132,10,114,8,"context"],[132,17,114,15],[132,20,114,18],[132,24,114,18,"useContext"],[132,30,114,28],[132,31,114,28,"useContext"],[132,41,114,28],[132,43,114,29,"AuthContext"],[132,54,114,40],[132,55,114,41],[133,4,115,2],[133,8,115,6],[133,9,115,7,"context"],[133,16,115,14],[133,18,115,16],[134,6,116,4],[134,12,116,10],[134,16,116,14,"Error"],[134,21,116,19],[134,22,116,20],[134,64,116,62],[134,65,116,63],[135,4,117,2],[136,4,118,2],[136,11,118,9,"context"],[136,18,118,16],[137,2,119,0],[137,3,119,1],[138,2,119,2,"_s2"],[138,5,119,2],[138,6,113,13,"useAuth"],[138,13,113,20],[139,2,113,20],[139,6,113,20,"_c"],[139,8,113,20],[140,2,113,20,"$RefreshReg$"],[140,14,113,20],[140,15,113,20,"_c"],[140,17,113,20],[141,0,113,20],[141,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUserProfile","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;qEC+B;YCK;GDE;yBEE;GFY;2BGE;GHU;gBIE;GJa;mBKE;GLU;iBME;GNI;sBOE;GPI;CDO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}